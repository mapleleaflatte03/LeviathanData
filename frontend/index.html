<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Leviathan ‚Äî Autonomous Data Intelligence</title>
  <link rel="stylesheet" href="/style.css" />
  <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
</head>
<body>
  <!-- Animated Background -->
  <div class="ocean-bg"></div>
  <div class="tentacles" id="tentacles">
    <div class="tentacle t1"></div>
    <div class="tentacle t2"></div>
    <div class="tentacle t3"></div>
    <div class="tentacle t4"></div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- Alert Modal -->
  <div class="modal-overlay" id="alertModal">
    <div class="modal alert-modal">
      <div class="modal-header">
        <div class="alert-icon pulse-glow">‚ö†Ô∏è</div>
        <h2>Alert</h2>
        <button class="modal-close" id="modalClose">√ó</button>
      </div>
      <div class="modal-body" id="alertModalBody"></div>
      <div class="modal-footer">
        <label><input type="checkbox" id="autoDismiss" /> Auto-dismiss in 10s</label>
        <button id="dismissAlert">Acknowledge</button>
      </div>
    </div>
  </div>

  <!-- Header -->
  <header class="topbar">
    <div class="brand">
      <div class="eye-container">
        <div class="eye" id="monsterEye">
          <div class="pupil"></div>
        </div>
      </div>
      <div>
        <h1 class="ripple-text" id="brandTitle">Leviathan</h1>
        <p>Autonomous Data Intelligence Platform</p>
      </div>
    </div>
    <div class="status-group">
      <div class="language-toggle" id="languageToggle">
        <button class="lang-btn active" data-lang="vi" title="Ti·∫øng Vi·ªát">üáªüá≥ VN</button>
        <button class="lang-btn" data-lang="en" title="English">üá¨üáß EN</button>
      </div>
      <div class="status" id="status">
        <span class="status-dot"></span>
        <span class="status-text">Disconnected</span>
      </div>
      <div class="llm-status" id="llmStatus">
        <span class="llm-indicator" title="LLM Health">üß†</span>
        <span class="llm-tokens" id="llmTokens">0 tokens</span>
        <button class="llm-toggle" id="llmToggle" title="Toggle LLM Logs">üì°</button>
      </div>
    </div>
  </header>

  <!-- LLM Log Panel (hidden by default) -->
  <div class="llm-log-panel" id="llmLogPanel">
    <div class="llm-log-header">
      <h3>üî¨ Raw LLM API Calls</h3>
      <button class="llm-log-close" id="llmLogClose">√ó</button>
    </div>
    <div class="llm-log-stats" id="llmLogStats">
      <span>Calls: <b id="llmCallCount">0</b></span>
      <span>Tokens In: <b id="llmTokensIn">0</b></span>
      <span>Tokens Out: <b id="llmTokensOut">0</b></span>
      <span>Endpoint: <b id="llmEndpoint">-</b></span>
    </div>
    <div class="llm-log-entries" id="llmLogEntries"></div>
  </div>

  <main class="layout">
    <!-- Auth Panel -->
    <section class="panel auth" id="authPanel">
      <h2>Enter the Abyss</h2>
      <div class="tabs">
        <button class="tab active" data-tab="login">Login</button>
        <button class="tab" data-tab="register">Register</button>
      </div>
      <form id="loginForm" class="form active">
        <label>Email<input type="email" name="email" required /></label>
        <label>Password<input type="password" name="password" required /></label>
        <button type="submit">Login</button>
      </form>
      <form id="registerForm" class="form">
        <label>Email<input type="email" name="email" required /></label>
        <label>Password<input type="password" name="password" required /></label>
        <button type="submit">Register</button>
      </form>
      <div class="helper" id="authMessage"></div>
    </section>

    <!-- Dashboard Panel -->
    <section class="panel dashboard" id="dashboardPanel">
      <!-- Quick Actions Bar -->
      <div class="quick-actions">
        <button class="action-btn" data-action="auto-eda">
          <span class="action-icon svg-icon eda-icon">
            <svg viewBox="0 0 48 48" class="monster-svg">
              <!-- Glowing red eye with scanning tentacles -->
              <defs>
                <radialGradient id="eyeGlowEda" cx="50%" cy="50%" r="50%">
                  <stop offset="0%" stop-color="#ff3333"/>
                  <stop offset="60%" stop-color="#cc0000"/>
                  <stop offset="100%" stop-color="#660000"/>
                </radialGradient>
                <filter id="glowEda">
                  <feGaussianBlur stdDeviation="2" result="blur"/>
                  <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
                </filter>
              </defs>
              <!-- Scanning tentacles -->
              <path class="tentacle scan-t1" d="M10 24 Q5 20 3 28 Q1 36 8 38" stroke="#0088aa" stroke-width="2" fill="none" opacity="0.7"/>
              <path class="tentacle scan-t2" d="M38 24 Q43 20 45 28 Q47 36 40 38" stroke="#0088aa" stroke-width="2" fill="none" opacity="0.7"/>
              <path class="tentacle scan-t3" d="M24 38 Q20 42 24 46 Q28 42 24 38" stroke="#0088aa" stroke-width="2" fill="none" opacity="0.6"/>
              <!-- Central eye -->
              <circle cx="24" cy="24" r="12" fill="url(#eyeGlowEda)" filter="url(#glowEda)" class="eye-orb"/>
              <circle cx="24" cy="24" r="5" fill="#000" class="pupil"/>
              <circle cx="22" cy="22" r="2" fill="rgba(255,255,255,0.4)"/>
              <!-- Scan lines -->
              <line class="scan-line" x1="12" y1="10" x2="36" y2="10" stroke="#ff3333" stroke-width="1" opacity="0.6"/>
              <line class="scan-line s2" x1="12" y1="14" x2="36" y2="14" stroke="#ff3333" stroke-width="1" opacity="0.4"/>
            </svg>
          </span>
          <span>Auto EDA</span>
        </button>
        <button class="action-btn" data-action="classify-images">
          <span class="action-icon svg-icon classify-icon">
            <svg viewBox="0 0 48 48" class="monster-svg">
              <!-- Tentacle wrapping frame -->
              <defs>
                <linearGradient id="tentGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" stop-color="#0088aa"/>
                  <stop offset="100%" stop-color="#004466"/>
                </linearGradient>
              </defs>
              <!-- Image frame -->
              <rect x="12" y="12" width="24" height="24" rx="2" fill="none" stroke="#0088aa" stroke-width="2" opacity="0.5"/>
              <!-- Wrapping tentacles -->
              <path class="tentacle wrap-t1" d="M8 8 Q4 12 6 20 Q8 28 4 36 Q2 40 8 44" stroke="url(#tentGrad)" stroke-width="3" fill="none" stroke-linecap="round"/>
              <path class="tentacle wrap-t2" d="M40 8 Q44 12 42 20 Q40 28 44 36 Q46 40 40 44" stroke="url(#tentGrad)" stroke-width="3" fill="none" stroke-linecap="round"/>
              <path class="tentacle wrap-t3" d="M16 6 Q24 2 32 6" stroke="url(#tentGrad)" stroke-width="2" fill="none"/>
              <!-- Small eye in center -->
              <circle cx="24" cy="24" r="6" fill="#001122" stroke="#0088aa" stroke-width="1"/>
              <circle cx="24" cy="24" r="3" fill="#ff3333" class="mini-eye-orb"/>
              <circle cx="24" cy="24" r="1" fill="#000"/>
            </svg>
          </span>
          <span>Classify Images</span>
        </button>
        <button class="action-btn" data-action="spam-detect">
          <span class="action-icon svg-icon spam-icon">
            <svg viewBox="0 0 48 48" class="monster-svg">
              <!-- Fanged mouth biting envelope -->
              <defs>
                <filter id="glowSpam">
                  <feGaussianBlur stdDeviation="1.5" result="blur"/>
                  <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
                </filter>
              </defs>
              <!-- Envelope -->
              <path d="M8 16 L24 28 L40 16 L40 36 L8 36 Z" fill="#003344" stroke="#0088aa" stroke-width="1.5"/>
              <path d="M8 16 L24 28 L40 16" fill="none" stroke="#0088aa" stroke-width="1.5"/>
              <!-- Monster mouth -->
              <ellipse cx="24" cy="14" rx="14" ry="8" fill="#220000" stroke="#cc0000" stroke-width="2" filter="url(#glowSpam)"/>
              <!-- Fangs -->
              <polygon class="fang f1" points="14,14 16,22 18,14" fill="#ffffff"/>
              <polygon class="fang f2" points="22,14 24,24 26,14" fill="#ffffff"/>
              <polygon class="fang f3" points="30,14 32,22 34,14" fill="#ffffff"/>
              <!-- Dripping -->
              <circle class="drip" cx="24" cy="26" r="1.5" fill="#ff3333"/>
            </svg>
          </span>
          <span>Spam Detection</span>
        </button>
        <button class="action-btn" data-action="time-series">
          <span class="action-icon svg-icon timeseries-icon">
            <svg viewBox="0 0 48 48" class="monster-svg">
              <!-- Wavy tentacles along timeline -->
              <defs>
                <linearGradient id="timeGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                  <stop offset="0%" stop-color="#004466"/>
                  <stop offset="50%" stop-color="#0088aa"/>
                  <stop offset="100%" stop-color="#00ccee"/>
                </linearGradient>
              </defs>
              <!-- Timeline base -->
              <line x1="4" y1="36" x2="44" y2="36" stroke="#0088aa" stroke-width="2" opacity="0.5"/>
              <!-- Time markers -->
              <circle cx="10" cy="36" r="2" fill="#0088aa"/>
              <circle cx="24" cy="36" r="2" fill="#0088aa"/>
              <circle cx="38" cy="36" r="2" fill="#0088aa"/>
              <!-- Wavy tentacles as data -->
              <path class="tentacle wave-data" d="M6 28 Q12 18 18 24 Q24 30 30 20 Q36 10 42 16" stroke="url(#timeGrad)" stroke-width="3" fill="none" stroke-linecap="round"/>
              <path class="tentacle wave-data2" d="M6 32 Q12 26 18 30 Q24 34 30 28 Q36 22 42 26" stroke="#ff3333" stroke-width="2" fill="none" stroke-linecap="round" opacity="0.6"/>
              <!-- Eye nodes -->
              <circle cx="18" cy="24" r="3" fill="#ff3333" class="data-eye"/>
              <circle cx="30" cy="20" r="3" fill="#ff3333" class="data-eye"/>
              <circle cx="18" cy="24" r="1" fill="#000"/>
              <circle cx="30" cy="20" r="1" fill="#000"/>
            </svg>
          </span>
          <span>Time-Series</span>
        </button>
        <button class="action-btn" data-action="anomaly-hunt">
          <span class="action-icon svg-icon anomaly-icon">
            <svg viewBox="0 0 48 48" class="monster-svg">
              <!-- Pulsing red eye with alert waves -->
              <defs>
                <radialGradient id="alertEye" cx="50%" cy="50%" r="50%">
                  <stop offset="0%" stop-color="#ff4444"/>
                  <stop offset="50%" stop-color="#cc0000"/>
                  <stop offset="100%" stop-color="#440000"/>
                </radialGradient>
                <filter id="glowAlert">
                  <feGaussianBlur stdDeviation="3" result="blur"/>
                  <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
                </filter>
              </defs>
              <!-- Alert waves -->
              <circle class="alert-wave w1" cx="24" cy="24" r="18" fill="none" stroke="#ff3333" stroke-width="1"/>
              <circle class="alert-wave w2" cx="24" cy="24" r="22" fill="none" stroke="#ff3333" stroke-width="1"/>
              <!-- Central hunting eye -->
              <circle cx="24" cy="24" r="10" fill="url(#alertEye)" filter="url(#glowAlert)" class="hunt-eye"/>
              <ellipse cx="24" cy="24" rx="3" ry="6" fill="#000" class="slit-pupil"/>
              <circle cx="22" cy="22" r="2" fill="rgba(255,255,255,0.3)"/>
              <!-- Detector tentacles -->
              <path class="tentacle detect-t1" d="M8 18 Q4 24 8 30" stroke="#ff3333" stroke-width="2" fill="none"/>
              <path class="tentacle detect-t2" d="M40 18 Q44 24 40 30" stroke="#ff3333" stroke-width="2" fill="none"/>
            </svg>
          </span>
          <span>Anomaly Hunt</span>
        </button>
      </div>

      <div class="dashboard-grid dashboard-grid-expanded">
        <!-- Chat Panel - Full Width Command Center -->
        <div class="card chat-card chat-card-full">
          <h3>
            <span class="card-icon svg-icon chat-icon">
              <svg viewBox="0 0 24 24" class="monster-svg">
                <path d="M4 4h16v12H6l-2 4v-4H4V4z" fill="#001a2c" stroke="#0088aa" stroke-width="1.5"/>
                <circle cx="8" cy="10" r="2" fill="#ff3333" class="chat-eye"/>
                <circle cx="16" cy="10" r="2" fill="#ff3333" class="chat-eye"/>
                <circle cx="8" cy="10" r="0.8" fill="#000"/>
                <circle cx="16" cy="10" r="0.8" fill="#000"/>
              </svg>
            </span>
            Leviathan Command Center
            <span class="hunt-status" id="huntStatus" title="Autonomous Hunt Status">üîç Ready</span>
          </h3>
          <div class="hunt-suggestions" id="huntSuggestions">
            <span class="suggestion-label">SƒÉn d·ªØ li·ªáu nhanh:</span>
            <button class="hunt-btn" data-hunt="vn-stock">üìà Ch·ª©ng kho√°n VN</button>
            <button class="hunt-btn" data-hunt="vn-news">üì∞ Tin t·ª©c VN</button>
            <button class="hunt-btn" data-hunt="vn-gdp">üåç GDP Vi·ªát Nam</button>
            <button class="hunt-btn" data-hunt="vn-sentiment">üí¨ Sentiment VN</button>
          </div>
          <div class="chat" id="chatLog">
            <div class="chat-entry bot">
              <div class="avatar agent-avatar">
                <div class="mini-eye"></div>
              </div>
              <div class="message">
                <span class="sender">Leviathan</span>
                <p>T√¥i ƒë√£ th·ª©c d·∫≠y v√† s·∫µn s√†ng sƒÉn d·ªØ li·ªáu. H√£y m√¥ t·∫£ d·ªØ li·ªáu b·∫°n c·∫ßn - t√¥i s·∫Ω t·ª± ƒë·ªông thu th·∫≠p, ph√¢n t√≠ch v√† tr·ª±c quan h√≥a.</p>
              </div>
            </div>
          </div>
          <div class="typing-indicator" id="typingIndicator">
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
          </div>
          <div class="chat-input chat-input-enhanced">
            <input type="text" id="chatInput" placeholder="Ph√¢n t√≠ch b·∫•t k·ª≥: Apple, VNDirect, Tesla, GDP Vi·ªát Nam..." />
            <button id="huntBtn" class="hunt-action-btn" title="Start Autonomous Hunt">
              <svg viewBox="0 0 24 24" width="24" height="24">
                <circle cx="10" cy="10" r="7" fill="none" stroke="currentColor" stroke-width="2"/>
                <line x1="15" y1="15" x2="21" y2="21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <circle cx="10" cy="10" r="2" fill="#ff3333"/>
              </svg>
            </button>
            <button id="chatSend">
              <svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
            </button>
          </div>
        </div>

        <!-- Swarm Console -->
        <div class="card console-card">
          <h3>
            <span class="card-icon svg-icon console-icon">
              <svg viewBox="0 0 24 24" class="monster-svg">
                <!-- Octopus/monster head -->
                <ellipse cx="12" cy="8" rx="8" ry="6" fill="#001a2c" stroke="#0088aa" stroke-width="1"/>
                <circle cx="9" cy="7" r="2" fill="#ff3333"/>
                <circle cx="15" cy="7" r="2" fill="#ff3333"/>
                <circle cx="9" cy="7" r="0.8" fill="#000"/>
                <circle cx="15" cy="7" r="0.8" fill="#000"/>
                <!-- Tentacles -->
                <path class="console-tent t1" d="M4 12 Q2 16 4 20" stroke="#0088aa" stroke-width="1.5" fill="none"/>
                <path class="console-tent t2" d="M8 13 Q7 17 9 21" stroke="#0088aa" stroke-width="1.5" fill="none"/>
                <path class="console-tent t3" d="M12 14 Q12 18 12 22" stroke="#0088aa" stroke-width="1.5" fill="none"/>
                <path class="console-tent t4" d="M16 13 Q17 17 15 21" stroke="#0088aa" stroke-width="1.5" fill="none"/>
                <path class="console-tent t5" d="M20 12 Q22 16 20 20" stroke="#0088aa" stroke-width="1.5" fill="none"/>
              </svg>
            </span>
            Swarm Console
          </h3>
          <div class="swarm-console" id="swarmConsole">
            <div class="console-entry info">
              <span class="timestamp">[--:--:--]</span>
              <span class="stage-tag">SYSTEM</span>
              <span class="log-message">Awaiting commands...</span>
            </div>
          </div>
        </div>

        <!-- Alerts Panel -->
        <div class="card alerts-card">
          <h3>
            <span class="card-icon svg-icon alerts-icon">
              <svg viewBox="0 0 24 24" class="monster-svg">
                <!-- Red glow pulse + tentacle grab -->
                <defs>
                  <filter id="alertGlow">
                    <feGaussianBlur stdDeviation="2" result="blur"/>
                    <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
                  </filter>
                </defs>
                <circle class="alert-pulse" cx="12" cy="10" r="6" fill="#ff3333" filter="url(#alertGlow)"/>
                <circle cx="12" cy="10" r="2" fill="#000"/>
                <!-- Grabbing tentacles -->
                <path class="grab-tent g1" d="M4 18 Q2 14 6 12" stroke="#cc0000" stroke-width="2" fill="none"/>
                <path class="grab-tent g2" d="M20 18 Q22 14 18 12" stroke="#cc0000" stroke-width="2" fill="none"/>
                <path class="grab-tent g3" d="M12 20 Q12 16 12 14" stroke="#880000" stroke-width="1.5" fill="none"/>
              </svg>
            </span>
            Proactive Alerts
            <span class="alert-badge" id="alertBadge">0</span>
          </h3>
          <div class="alerts" id="alertsList"></div>
        </div>

        <!-- Charts Panel -->
        <div class="card charts-card">
          <h3>
            <span class="card-icon svg-icon charts-icon">
              <svg viewBox="0 0 24 24" class="monster-svg">
                <!-- Chart with tentacle data lines -->
                <line x1="4" y1="20" x2="4" y2="4" stroke="#0088aa" stroke-width="1" opacity="0.5"/>
                <line x1="4" y1="20" x2="22" y2="20" stroke="#0088aa" stroke-width="1" opacity="0.5"/>
                <path class="chart-tentacle" d="M6 16 Q8 10 12 12 Q16 14 18 8 Q20 4 22 6" stroke="#00ccee" stroke-width="2" fill="none"/>
                <circle cx="12" cy="12" r="2" fill="#ff3333" class="chart-node"/>
                <circle cx="18" cy="8" r="2" fill="#ff3333" class="chart-node"/>
              </svg>
            </span>
            Dynamic Charts
          </h3>
          <div class="chart-tabs" id="chartTabs">
            <button class="chart-tab active" data-chart="main">Overview</button>
            <button class="chart-tab" data-chart="distribution">Distribution</button>
            <button class="chart-tab" data-chart="correlation">Correlation</button>
            <button class="chart-tab" data-chart="forecast">Forecast</button>
            <button class="chart-tab" data-chart="custom">Custom</button>
          </div>
          <div class="chart-container" id="chartContainer">
            <div class="chart-controls">
              <button class="chart-ctrl" id="zoomIn" title="Zoom In">üîç+</button>
              <button class="chart-ctrl" id="zoomOut" title="Zoom Out">üîç‚àí</button>
              <button class="chart-ctrl" id="resetView" title="Reset">‚Üª</button>
            </div>
            <div id="plotlyChart"></div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div>Leviathan ¬© 2026 ‚Äî From the Depths</div>
    <button id="logout">Logout</button>
  </footer>

  <!-- Audio for alerts -->
  <audio id="alertSound" preload="auto">
    <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2teleVklP5Tazq9nGgU9mNzbpm8TCjySz9O6cRUJPZPN0r1wFQs7ks3Uv3ESCjqQzNPAcBILOY/L0sJwEgs5jsrRwnASCzmOytHCcA==" type="audio/wav">
  </audio>

  <script src="/script.js"></script>
</body>
</html>
